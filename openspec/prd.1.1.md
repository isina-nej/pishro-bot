سلام! صدای شما (متن صحبت‌هاتون) رو دقیق خوندم و متوجه نیازمندی‌ها و البته فوریت کار شدم. به عنوان یک مدیر محصول و معمار نرم‌افزار، خیالتون راحت باشه؛ نیازمندی‌های این ربات (با توجه به ۳ نقش کاربری و منطق مالی که فرمودید) کاملاً شفاف و مشخصه. بخش فروشگاه ولت‌های سخت‌افزاری رو همونطور که خواستید فاکتور گرفتم و این سند (PRD) رو فقط و فقط برای ربات تلگرامی پیگیری سرمایه با یک ساختار استاندارد و آماده‌ی ارائه به تیم فنی تدوین کردم.
در ادامه، سند محصول (PRD) با فریم‌ورک‌های روز پایتون (مثل aiogram که بهینه‌ترین و سریع‌ترین ابزار فعلیه) براتون آماده شده است:
1. Overview (نمای کلی)
خلاصه ویژگی: یک ربات تلگرامی اختصاصی برای مدیریت و پیگیری وضعیت سرمایه‌گذاری کاربران (حدود ۵۰ الی ۶۰ نفر) که دارای سه سطح دسترسی مجزا برای «سرمایه‌گذار»، «حسابدار» و «مدیر ارشد (خانم دکتر)» است.
بیانیه مسئله (Problem Statement): تماس‌های تلفنی و پیگیری‌های مکرر سرمایه‌گذاران برای اطلاع از وضعیت سود، اصل سرمایه و تاریخچه‌ی مالی، وقت زیادی از تیم مدیریت می‌گیرد و نیازمند یک سیستم پاسخگویی خودکار و در لحظه است.
هدف بیزینسی (Goal): ایجاد یک درگاه شفاف، سریع و در دسترس (Self-service) برای سرمایه‌گذاران تا در هر لحظه وضعیت مالی خود را مشاهده کنند؛ و همچنین ایجاد بستری یکپارچه برای ادمین‌ها جهت ثبت سوابق افزایش/کاهش سرمایه و به‌روزرسانی سودها.
2. Scope & Out of Scope (محدوده پروژه)
In Scope (در محدوده این فاز):
 * پیاده‌سازی ربات تلگرامی با منوهای شیشه‌ای (Inline Keyboards).
 * سیستم احراز هویت ساده و امن برای محدود کردن دسترسی فقط به کاربران ثبت‌شده (۵۰-۶۰ نفر).
 * پیاده‌سازی ۳ نقش کاربری مجزا (Investor, Accountant, Admin).
 * امکان ثبت تاریخچه تراکنش‌ها (افزایش، کاهش، فسخ سرمایه).
 * امکان به‌روزرسانی دستی ارزش فعلی سرمایه و سود توسط مدیر ارشد.
 * گزارش‌گیری فردی برای سرمایه‌گذار.
Out of Scope (خارج از محدوده این فاز):
 * درگاه پرداخت آنلاین (واریز و برداشت مستقیماً از طریق ربات انجام نمی‌شود).
 * اتصال به صرافی‌ها یا سیستم‌های تریدینگ برای محاسبه خودکار سود (ورود داده‌ها کاملاً دستی است).
 * فروشگاه ولت‌های سخت‌افزاری (در ماژول وب‌سایت هندل می‌شود).
3. User Personas & Use Cases (کاربران و سناریوها)
پرسوناها:
 * سرمایه‌گذار (Investor): شخصی که سرمایه‌ای را قرار داده (سود ثابت ۸٪ ماهانه یا هولد ۳-۶ ماهه) و می‌خواهد بدون تماس تلفنی، از موجودی و سود خود مطلع شود.
 * حسابدار (Accountant): مسئول ثبت ورود و خروج پول. وظیفه او ثبت مبالغ افزایش، کاهش یا فسخ قرارداد است.
 * مدیر ارشد / خانم دکتر (Admin): شخصی که درصد رشد یا مبلغ فعلی سرمایه‌ی هولدرها را در بازه‌های زمانی مختلف (مثلاً ماهانه یا دوره‌ای) در سیستم آپدیت می‌کند.
سناریوهای اصلی (Use Cases):
 * UC-1: مشاهده وضعیت سرمایه (توسط سرمایه‌گذار)
   * Pre-conditions: کاربر باید در ربات ثبت‌نام و توسط ادمین تایید شده باشد.
   * Post-conditions: کاربر گزارش مالی خود را دریافت می‌کند.
   * Main Flow: کاربر ربات را start/ می‌کند -> دکمه «وضعیت سرمایه من» را می‌زند -> ربات اصل سرمایه اولیه، مبالغ واریز/برداشت میان‌دوره، سود محاسبه‌شده تا امروز و ارزش کل فعلی را نمایش می‌دهد.
 * UC-2: مشاهده سوابق مالی (توسط سرمایه‌گذار)
   * Main Flow: کاربر دکمه «تاریخچه تراکنش‌ها» را می‌زند -> لیستی از تاریخ‌های واریز (مثلاً فروردین ۱ میلیارد)، برداشت‌ها و تغییرات را می‌بیند.
 * UC-3: ثبت تراکنش جدید (توسط حسابدار)
   * Pre-conditions: شناسه تلگرام حسابدار در سیستم تعریف شده باشد.
   * Main Flow: حسابدار منوی مدیریت را باز می‌کند -> کاربر مورد نظر را انتخاب می‌کند -> گزینه (افزایش / کاهش / فسخ) را می‌زند -> مبلغ و تاریخ را وارد می‌کند -> سیستم دیتابیس را آپدیت کرده و پیام تاییدی برای سرمایه‌گذار پیامک/تلگرام می‌کند.
 * UC-4: به‌روزرسانی سود و ارزش پورتفو (توسط مدیر ارشد)
   * Pre-conditions: دسترسی مدیر ارشد برای کاربر فعال باشد.
   * Main Flow: مدیر ارشد لیست هولدرها را باز می‌کند -> یک سرمایه‌گذار را انتخاب می‌کند -> ارزش روز سرمایه وی (مثلاً یک میلیارد و صد میلیون تومان) یا درصد سود فعلی (مثلاً ۴۰٪) را وارد می‌کند -> وضعیت کاربر آپدیت می‌شود.
4. Functional Requirements (نیازمندی‌های عملکردی)
 * FR-1: ربات باید قابلیت تشخیص سطح دسترسی (Role-based access) بر اساس User_ID تلگرام را داشته باشد. افراد ناشناس در صورت ورود به ربات، پیامی مبنی بر "شما دسترسی ندارید" دریافت کنند.

Sina, [2/23/26 9:17 PM]
* FR-2: ربات باید امکان جستجو و انتخاب کاربران بر اساس نام یا شماره تماس را برای حسابدار و مدیر ارشد فراهم کند.
 * FR-3: سیستم باید از دو نوع قرارداد سرمایه‌گذاری پشتیبانی کند: نوع الف (سود ثابت ماهانه) و نوع ب (هولد دوره‌ای متغیر).
 * FR-4: حسابدار باید بتواند تراکنش‌های "افزایش"، "کاهش" و "فسخ" را همراه با تاریخ شمسی برای هر کاربر ثبت کند.
 * FR-5: مدیر ارشد باید بتواند "مبلغ ارزش فعلی" را برای کاربرانِ هولد دوره‌ای ثبت کند (Overwrite کند).
 * FR-6: ربات باید به صورت خودکار تغییرات اعمال شده توسط ادمین/حسابدار را (در صورت نیاز) به صورت نوتیفیکیشن (Push Notification) در تلگرام به سرمایه‌گذار اطلاع دهد.
5. Non-Functional Requirements (نیازمندی‌های غیرعملکردی)
 * Performance (کارایی): به دلیل تعداد کم کاربران (حدود ۶۰ نفر)، بار پردازشی بسیار پایین است؛ اما کدهای ربات باید Asynchronous باشند تا از بلاک شدن درخواست‌ها جلوگیری شود.
 * Security (امنیت): تمامی داده‌های مالی حساس هستند. دیتابیس باید ایمن باشد و هیچ سرمایه‌گذاری نتواند با تغییر پارامتر، اطلاعات شخص دیگری را ببیند. گرفتن شماره تماس (Contact) در اولین ورود برای تطبیق با دیتابیس ضروری است.
 * Reliability & Monitoring: ربات باید روی سرورهای خارج از ایران (به دلیل فیلترینگ تلگرام) هاست شود و آپتایم ۹۹.۹٪ داشته باشد.
 * UX (تجربه کاربری): استفاده کامل از اینلاین کیبوردها (دکمه‌های شیشه‌ای) تا کاربر کمترین نیاز را به تایپ دستی داشته باشد. تاریخ‌ها همگی باید جلالی (شمسی) نمایش داده شوند.
6. Integration & API Hints (یکپارچگی و معماری فنی)
 * Tech Stack:
   * زبان: Python 3.11+
   * فریم‌ورک ربات: aiogram 3.x (بهترین، سریع‌ترین و استانداردترین فریم‌ورک فعلی پایتون برای تلگرام).
   * دیتابیس: PostgreSQL (برای حفظ یکپارچگی تراکنش‌های مالی) به همراه ORM قدرتمند SQLAlchemy.
 * دیتابیس (High-level schema):
   * Users: نگهداری اطلاعات هویتی، Telegram ID، شماره موبایل و نقش (Investor/Accountant/Admin).
   * Investments: نوع قرارداد، تاریخ شروع، مبلغ اولیه.
   * Transactions: لاگ دقیق افزایش/کاهش‌ها (مبلغ، تاریخ، نوع).
   * Valuations: سابقه آپدیت‌های ادمین برای ارزش سرمایه.
7. Analytics & Success Metrics (شاخص‌های موفقیت)
 * کاهش تماس‌های تلفنی: مهم‌ترین KPI، کاهش چشمگیر تماس‌های سرمایه‌گذاران با شرکت برای پرسیدن "پولم چقدر شده؟" است.
 * Engagement: تعداد دفعاتی که سرمایه‌گذاران در طول ماه ربات را چک می‌کنند (نشان‌دهنده پذیرش ابزار توسط کاربر).
 * Error Rate: تعداد دفعاتی که حسابدار یا مدیر در وارد کردن اعداد اشتباه می‌کنند و نیاز به ویرایش پیدا می‌کنند.
8. Risks & Open Questions (ریسک‌ها و سوالات باز)
ریسک‌ها:
 * فیلترینگ تلگرام: چون کاربران در ایران هستند، باید از VPN استفاده کنند. اگر کاربران مسن باشند، ممکن است کار با تلگرام و پروکسی برایشان سخت باشد.
 * خطای انسانی: اشتباه در تایپ یک صفر اضافه توسط حسابدار یا مدیر باعث نمایش اطلاعات غلط و ایجاد وحشت/نارضایتی در سرمایه‌گذار می‌شود. (باید یک مرحله "تایید مجدد" یا Preview قبل از ثبت نهایی قرار دهیم).
سوالات باز (قبل از شروع توسعه نهایی پاسخ داده شود):
 * آیا سود هولدرهای ۸٪ به صورت خودکار توسط سیستم به موجودی اضافه می‌شود (مثلاً سر هر ماه) یا آن هم دستی توسط حسابدار وارد می‌شود؟
 * اگر سرمایه‌گذار در میانه‌ی ماه پولی اضافه کند (افزایش سرمایه)، سود آن در آن ماه چگونه محاسبه می‌شود؟ آیا ادمین عدد نهایی را به صورت چشمی حساب می‌کند و دستی وارد می‌کند؟
9. Acceptance Criteria (معیارهای پذیرش / "Done")
 * [ ] ربات به درستی پیام /start را پاسخ داده و بر اساس شماره موبایل یا آیدی، کاربر را شناسایی کند.
 * [ ] کاربر بتواند منوی اصلی را ببیند و با زدن دکمه وضعیت، در کمتر از ۱ ثانیه گزارش مالی خود را بدون خطا دریافت کند.
 * [ ] حسابدار بتواند با منوی شیشه‌ای، برای یک کاربر خاص مثلاً ۲۰۰ میلیون تومان «کاهش سرمایه» ثبت کند و دیتابیس آپدیت شود.
 * [ ] مدیر ارشد بتواند سود/ارزش جدید سرمایه‌گذار را ثبت کند و سیستم مبلغ جدید را به کاربر نمایش دهد.
 * [ ] سورس‌کد ساختارمند (Modular) بوده و قابلیت انتقال راحت به سرور نهایی را داشته باشد.
گام بعدی:
آیا می‌خواهید با توجه به این داکیومنت، یک برآورد زمانی و ساختار دیتابیس (Schema) رو برای تیم فنی‌تون طراحی کنم تا بدون معطلی کدنویسی رو شروع کنن؟

سند نیازمندی‌های فنی و استراتژیک سیستم جامع سرمایه‌گذاری و درگاه فروش سخت‌افزاری تحت پلتفرم تلگرام
تلاقی فناوری‌های مالی و سیستم‌های پیام‌رسان در سال ۲۰۲۶ به نقطه‌ای رسیده است که امنیت، سرعت و سهولت دسترسی، ارکان اصلی اعتماد کاربران را تشکیل می‌دهند. پروژه حاضر با هدف ایجاد یک اکوسیستم یکپارچه شامل یک ربات تلگرامی پیشرفته برای مدیریت سرمایه‌گذاری و یک صفحه فروشگاهی مینیمالیست برای عرضه کیف‌پول‌های سخت‌افزاری، پاسخی فنی به نیازهای یک شرکت سرمایه‌گذاری با حجم تراکنش بالا و تعداد کاربران برگزیده است. در این گزارش، معماری سیستم بر پایه بهترین فریم‌ورک‌های پایتون، منطق ریاضی مدل‌های سوددهی، ساختار پایگاه داده تراکنشی و پروتکل‌های امنیتی چندلایحه مورد تحلیل قرار می‌گیرد. 
تحلیل زیرساخت و انتخاب فریم‌ورک بهینه پایتون
در توسعه ربات‌های تلگرامی که با داده‌های مالی حساس و تراکنش‌های همزمان سروکار دارند، انتخاب فریم‌ورک نه تنها یک تصمیم فنی، بلکه یک ضرورت استراتژیک برای حفظ پایداری سیستم است. برای پروژه‌ای با مقیاس ۵۰ تا ۶۰ سرمایه‌گذار سطح بالا، که نیازمند مدیریت وضعیت‌های پیچیده (FSM) و سطوح دسترسی مختلف است، فریم‌ورک Aiogram 3 به عنوان استاندارد طلایی شناخته می‌شود. 
مقایسه فنی فریم‌ورک‌های برتر پایتون برای ربات‌های مالی
انتخاب Aiogram 3 بر پایه قابلیت‌های غیرهمزمان (Asynchronous) آن صورت گرفته است که به سیستم اجازه می‌دهد بدون مسدود کردن رشته‌های اجرایی (Execution Threads)، درخواست‌های همزمان چندین کاربر، حسابدار و مدیر را مدیریت کند.